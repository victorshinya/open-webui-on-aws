# Open WebUI Configuration with AWS Cognito Authentication
# Copy this file to .env.local and fill in your values

# ============================================================================
# AWS Cognito Configuration (Required)
# ============================================================================

# Your Cognito User Pool ID
# Format: us-east-1_xxxxxxxxx
# Find this in AWS Console → Cognito → User Pools → [Your Pool] → General Settings
COGNITO_USER_POOL_ID=

# Your Cognito App Client ID
# Find this in AWS Console → Cognito → User Pools → [Your Pool] → App Clients
OAUTH_CLIENT_ID=

# Your Cognito App Client Secret
# Find this in AWS Console → Cognito → User Pools → [Your Pool] → App Clients → Show Details
OAUTH_CLIENT_SECRET=

# AWS Region where your Cognito User Pool is located
AWS_REGION=us-east-1

# Cognito Domain (without https://)
# Format: your-domain.auth.us-east-1.amazoncognito.com
# Find this in AWS Console → Cognito → User Pools → [Your Pool] → App Integration → Domain
COGNITO_DOMAIN=

# ============================================================================
# OAuth Configuration
# ============================================================================

# OAuth Provider Name (displayed on login page)
OAUTH_PROVIDER_NAME="AWS Cognito"

# OpenID Provider URL (constructed from User Pool ID and Region)
# Format: https://cognito-idp.{region}.amazonaws.com/{user-pool-id}
OPENID_PROVIDER_URL=https://cognito-idp.${AWS_REGION}.amazonaws.com/${COGNITO_USER_POOL_ID}

# OAuth Scopes (space-separated)
OAUTH_SCOPES="openid profile email"

# OAuth Redirect URI (where Cognito sends users after authentication)
# For local development, use: http://localhost:3000/oauth/callback
# For AWS deployment, use: https://your-domain.com/oauth/callback
OAUTH_REDIRECT_URI=http://localhost:3000/oauth/callback

# ============================================================================
# Open WebUI Configuration
# ============================================================================

# Port for local development
PORT=3000

# Data directory for persistent storage
# Local: /app/backend/data (inside container, mapped to ./data volume)
# AWS: /mnt/efs/data (EFS mount point)
DATA_DIR=/app/backend/data

# Enable/disable user registration
# Set to false if you want to manage users only through Cognito
ENABLE_SIGNUP=false

# Default user role for new users
# Options: user, admin
DEFAULT_USER_ROLE=user

# ============================================================================
# OAuth Advanced Configuration
# ============================================================================

# Enable OAuth signup (allow new users to register via Cognito)
ENABLE_OAUTH_SIGNUP=true

# Merge accounts by email if user exists with same email
OAUTH_MERGE_ACCOUNTS_BY_EMAIL=true

# ============================================================================
# Session Configuration
# ============================================================================

# Session secret for cookie encryption (generate a random string)
# Generate with: openssl rand -hex 32
# IMPORTANT: Generate a unique value for production!
WEBUI_SECRET_KEY=

# Enable authentication (should be true when using Cognito)
WEBUI_AUTH=true

# ============================================================================
# Optional: LLM Backend Configuration
# ============================================================================

# Ollama API endpoint (if using Ollama)
# Local: http://host.docker.internal:11434
# Remote: https://your-ollama-server.com
OLLAMA_API_BASE_URL=http://host.docker.internal:11434

# OpenAI API Key (if using OpenAI)
OPENAI_API_KEY=

# OpenAI API Base URL (optional, for custom endpoints)
OPENAI_API_BASE_URL=https://api.openai.com/v1

# ============================================================================
# Optional: Advanced Configuration
# ============================================================================

# Upload file size limit (in MB)
MAX_UPLOAD_SIZE=100

# Enable community sharing features
ENABLE_COMMUNITY_SHARING=false

# Enable message rating
ENABLE_MESSAGE_RATING=true

# ============================================================================
# AWS-Specific Configuration (for CloudFormation deployment)
# ============================================================================

# These are typically set via CloudFormation parameters, not environment files
# Documented here for reference

# ECS Task CPU (256, 512, 1024, 2048, 4096)
# ECS_TASK_CPU=512

# ECS Task Memory (512, 1024, 2048, 4096, 8192)
# ECS_TASK_MEMORY=1024

# Desired number of ECS tasks
# ECS_DESIRED_COUNT=1

# EFS File System ID (created by CloudFormation)
# EFS_FILE_SYSTEM_ID=

# ALB DNS Name (output from CloudFormation)
# ALB_DNS_NAME=
